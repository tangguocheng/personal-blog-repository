---
title: UART
toc: true
date: 2016-08-05 10:12:15
categories: 总线协议
tags: UART
---
通用异步收发器(UART)是嵌入式应用中最为常见的一中"总线协议"，之所以将UART归为总线协议中的一种，是因为广义上来讲，它规定了通信双方需要遵循的数据速率、通信格式等规则。即使它很简单，但是因为应用广泛，所以还是很值得去了解UART的相关特点以及实际应用中的一些注意点。

## 发送与接收
UART将字节数据已一个个独立的位按照连续的方式发出，接收方已同样的方式接收并组成原字节数据，发送方与接收方都包含一个移位寄存器(shift register)用来将数据"串行化"或"反串行化。根据通信方式，UART可以分为单工、半双工、双工通信三类。

## 数据构成
UART发送或接收的数据结构：起始位 + 数据位 + 校验位 + 停止位，其中除校验位可选外，其它都是必须项。

### 空闲模式
当总线出于空闲模式时，发送端需要保持高电平，这是电报的历史遗留(保持高电平用以指示通讯线或收发器没有遭到破坏)。**这在利用GPIO软件模拟UART的时候尤其需要注意，如果忽略会导致通信无法实现**

### 起始位
每次通信总是已一个逻辑"0"的bit开始，称为起始位。因为在空闲模式总线处于逻辑"1"，当起始位出现时，会产生一个下降沿，容易用来产生唤醒终端，通知接收方即使处理接下来发送的数据。

### 数据位
数据位从5到9位不等，根据实际应用决定，大部分选择8位数据位，即一个字节。

### 校验位
这是可选项，分为奇校验、偶校验、空格校验、标记校验等。奇校验保证数据位与校验位中的"1"的总数为奇数，偶校验则相反。至于空格校验则是校验位为"0",标记校验为"1"。

### 停止位
与起始位作用相反，标识通信结尾，为逻辑"1"。

